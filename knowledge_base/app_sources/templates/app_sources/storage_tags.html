{% extends 'clear_base.html' %}
{% load static %}
{% load humanize %}
{% load custom_filters %}
{% load status_tags %}

{% block extra_css %}
    <link href="{% static 'css/storage.css' %}" rel="stylesheet">
    <link href="{% static 'libs/choices/choices.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/custom_choices.css' %}" rel="stylesheet">
{% endblock %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb" class="breadcrumb-wrapper">
    <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{{ storage.kb.get_absolute_url }}" itemprop="item">
            <span itemprop="name">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π {{ storage.kb.name }}</span>
        </a>
        <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{{ storage.get_absolute_url }}" itemprop="item">
            <span itemprop="name">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π {{ storage.name }}</span>
        </a>
        <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
        <span itemprop="name">–û–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤</span>
        <meta itemprop="position" content="2" />
        </li>
    </ol>
</nav>
{% endblock %}

{% block title %}{{ storage.name }}{% endblock %}

{% block content %}
<div class="page page--{{ storage_type }}">
    <div class="page__top page__grid">
        <div class="page__info info-page">
            <span class="info-page__banner">–í–ï–ë-–°–ê–ô–¢</span>
            <div class="info-page__header">
                <h2 class="page__heading _ta-e">{{ storage.name }}</h2>
                <h3 class="info-page__heading  _ta-e">{{ storage.base_url }}</h3>
            </div>
            <div class="info-page__body">
                
            </div>
            <div class="info-page__footer">
                
            </div>
        </div>
        <div></div>
        <div class="page__info info-page">
            <div class="info-page__header">
                <h2 class="page__heading">–û–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤</h2>
                <h3 class="info-page__heading"></h3>
                <p class="text text--muted">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
                </p>
            </div>
            <div class="info-page__body">
                {% with form=storage_tags_update_form %}
                    <form action="{% url 'sources:storage_tags' storage_type storage.pk %}" method="POST" class="form">
                        {% csrf_token %}
                        {% include "widgets/_form_content-widget.html" %}
                        <button class="btn btn--reset btn--simple" type="submit">
                            —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </form>
                {% endwith %}
            </div>
            <div class="info-page__footer">
                <div class="btns _jc-fe">
                    
                </div>
            </div>
        </div>
        <div class="page__info info-page">
            <div class="info-page__header">
                <h2 class="page__heading">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</h2>
                <h3 class="info-page__heading"></h3>
                <p class="text text--muted">–ë—É–¥—É—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Ç–µ–≥–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –≤ —Ñ–æ—Ä–º–µ –≥–ª—É–±–∏–Ω—É –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤ —Ö—Ä–∞–Ω–ª–∏—â–∞. 
                    –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ —Ç–µ–≥–æ–≤ –ø–æ —Ö—Ä–∞–Ω–∏–ª–∏—â—É:  <span class="text text--fat">{{ longest_tags|length }}</span>. 
                </p>
                <p class="text text--muted">–ü—Ä–∏–º–µ—Ä: <span class="text text--fat">{{ longest_tags|join:", " }}</span>
                </p>
            </div>
            <div class="info-page__body">
                {% with form=storage_tags_scan_form %}
                    <form action="{% url 'sources:storage_tags' storage_type storage.pk %}" method="POST" class="form">
                        {% csrf_token %}
                        {% include "widgets/_form_content-widget.html" %}
                        <button class="btn btn--reset btn--simple" type="submit">
                            –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </form>
                {% endwith %}
            
            </div>
            <div class="info-page__footer">
                <div class="btns _jc-fe">
                    
                </div>
            </div>
        </div>
        
    </div>

    <article class="page__content">
        
        <h3 class="page__subheading">üóÇÔ∏è –ò—Å—Ç–æ—á–Ω–∏–∫–∏</h3>
        <form class="page__grader form" action="" method="GET" id="url-filter-form">
            {% csrf_token %}
            {% comment %} {% include "widgets/_form_content-widget.html" %} {% endcomment %}
            
        <form>
    
    </article>
</div>
{% endblock content %}

{% block script %}
    <script src="{% static 'libs/choices/choices.min.js' %}"></script>
    <script>
            new Choices("#id_executors", {
                allowHTML: true,
                classNames: {
                    containerOuter: 'choices custom-choices custom-choices_transparent',
                },
                position: 'down',
                searchEnabled: true,
                itemSelectText: '–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è',
                removeItems: true,
                removeItemButton: true,
                // renderChoiceLimit: 5,
            })
    </script>
{% endblock script%}