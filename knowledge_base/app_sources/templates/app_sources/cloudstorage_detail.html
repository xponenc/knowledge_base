{% extends 'base.html' %}
{% block title %}{{ cloudstorage.name }}{% endblock %}

{% block content %}
<div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">–î–µ—Ç–∞–ª–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: {{ cloudstorage.name }}</h5>
    </div>
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-3">ID</dt>
            <dd class="col-sm-9">{{ cloudstorage.pk }}</dd>

            <dt class="col-sm-3">–ù–∞–∑–≤–∞–Ω–∏–µ</dt>
            <dd class="col-sm-9">{{ cloudstorage.name }}</dd>

            <dt class="col-sm-3">–¢–∏–ø API</dt>
            <dd class="col-sm-9">{{ cloudstorage.api_type }}</dd>

            <dt class="col-sm-3">–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</dt>
            <dd class="col-sm-9">
                <pre class="bg-light p-2 rounded">{{ cloudstorage.credentials|default:"‚Äî" }}</pre>
            </dd>
        </dl>
    </div>
</div>

<form action="{% url 'sources:cloud_storage_sync' cloudstorage.pk %}" method="POST">
    {% csrf_token %}
    <button type="submit" class="btn btn-success">üîÑ –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–ª–∞–∫–∞</button>
</form>

{% for report in cloudstorage.reports.all %}
    {{ report }}
{% endfor %}

<h3>–ö–æ–Ω—Ç–µ–Ω—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</h3>

{% for document in cloudstorage.documents.all %}
    <div>
        <p>{{ document.url }}</p>
        <p>{{ document.get_status_display }}</p>
        <p>{{ document.errors }}</p>
        {% for raw_content in document.rawcontent_set.all %}
            <p>{{ raw_content.file.url }}</p>
            <p>{{ raw_content.hash_content }}</p>
        {% endfor %}
        <p>{{ document.ra }}</p>
    </div>
{% endfor %}
{% endblock %}
