{% extends 'clear_base.html' %}
{% load static %}


{% block extra_css %}
{% endblock %}


{% block title %}–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π{{ object.name }}{% endblock %}

{% block nav %}
    {% include "include/nav.html" %}
{% endblock nav %}


{% block content %}
<div class="page page--kb">
    <div class="page__top page__grid">
        <div class="page__info info-page info-page--logo">
            {% if  object.logo.url %}
                <img src="{{ object.logo.url }}" alt="–õ–æ–≥–æ—Ç–∏–ø –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π {{ object.name }}" class="info-page__logo">
            {% endif %}
        </div>
        <div class="page__info info-page">
            <span class="info-page__banner">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</span>
            <div class="info-page__header">
                <h2 class="page__heading page__heading--accent _ta-e">{{ object.name }}</h2>
                <h3 class="info-page__heading">–î–µ—Ç–∞–ª–∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π</h3>
            </div>
            <div class="info-page__body">
                <h3 class="info-page__heading"></h3>
                <dl class="description">
                    <dt class="description__term">–í–ª–∞–¥–µ–ª—å—Ü—ã</dt>
                    <dd class="description__defination tags">
                        {% for user in object.owners.all %}
                            <span class="tag tag--simple">
                                {{ user.get_full_name|default:user.username }}
                            </span>
                        {% endfor %}
                    </dd>
                    <dt class="description__term">–û–ø–∏—Å–∞–Ω–∏–µ</dt>
                    <dd class="description__defination">
                        {{ object.description|default:"‚Äî" }}
                    </dd>
                    <dt class="description__term">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</dt>
                    <dd class="description__defination">
                        <pre class="text">{{ object.created_at|date:"d.m.Y H:i" }}</pre> 
                    </dd>
                </dl>
            </div>
            <div class="info-page__footer">
                <div class="btns _jc-fe">
                    <a href="{% url 'core:knowledgebase_update' object.id %}" class="btn btn--reset btn--round" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π">
                        <svg class="btn__icon">
                            <use xlink:href="{% static 'img/icons/sprite.svg' %}#edit-gear"></use>
                        </svg>
                    </a>
                    <a href="{% url 'chunks:ask_frida' %}" class="btn btn--reset btn--simple">
                        üì¶ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="page__content">
        
        <div class="page__info info-page info-page--cloud _mb" id="cloud">
            <span class="info-page__banner info-page__banner--medium">–æ–±–ª–∞–∫–∞</span>
            <div class="info-page__header">
                <h3 class="info-page__heading _ta-e">–°–ø–∏—Å–æ–∫ –æ–±–ª–∞—á–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â</h3>
                <div class="btns">
                    <a href="{% url 'sources:cloudstorage_create' knowledgebase.pk %}" class="btn btn--reset btn--simple" title="–î–æ–±–∞–≤–∏—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–î–æ–±–∞–≤–∏—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                        <svg class="btn__icon">
                            <use xlink:href="{% static 'img/icons/sprite.svg' %}#cloud"></use>
                        </svg>
                        —Å–æ–∑–¥–∞—Ç—å
                    </a>
                </div>
            </div>
            <div class="info-page__body">
                <h3 class="info-page__heading"></h3>
                {% if knowledgebase.cloud_storages|length > 0 %}
                    <table class="elastic-table elastic-table_3-auto">
                        <thead class="elastic-table__thead">
                            <tr class="elastic-table__tr">
                                <th class="elastic-table__th">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="elastic-table__th">–ö–æ–ª-–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</th>
                                <th class="elastic-table__th"></th>
                            </tr>
                        </thead>
                        <tbody class="elastic-table__tbody">
                            {% for storage in knowledgebase.cloud_storages %}
                                <tr class="elastic-table__tr">
                                    <td class="elastic-table__td">
                                        <a href="{% url 'sources:cloudstorage_detail' storage.id %}" class="link-marker">
                                            <div class="elastic-table__cell">
                                                <span>{{ storage.name }}</span>
                                                <span>{{ storage.credentials.url }}{{ storage.credentials.root_path }}</span>
                                                <span>{{ storage.created_at|date:"d.m.Y H:i" }}</span>
                                                <span>{{ storage.author.get_full_name|default:storage.author }}</span>
                                            </div>
                                            <svg class="link-marker__marker">
                                                <use xlink:href="{% static 'img/icons/sprite.svg' %}#cloud"></use>
                                            </svg>
                                        </a>
                                    </td>
                                    <td class="elastic-table__td">
                                        {{ storage.networkdocuments_counter }}
                                    </td>
                                    <td class="elastic-table__td _ai-fe">
                                        <div class="btns">
                                            <a href="{% url 'sources:cloudstorage_update' storage.id %}" class="btn btn--reset btn--round" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#edit-gear"></use>
                                                </svg>
                                            </a>
                                            <a href="{% url 'sources:cloudstorage_delete' storage.id %}" class="btn btn--reset btn--round btn--danger"  title="–£–¥–∞–ª–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–£–¥–∞–ª–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#trash-fat"></use>
                                                </svg>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="text text--muted _ta-c">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–±–ª–∞—á–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â</p>
                {% endif %}
            </div>
            <div class="info-page__footer">
            </div>
        </div>
        <div class="page__info info-page info-page--local _mb" id="local">
            <span class="info-page__banner info-page__banner--medium">–ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏</span>
            <div class="info-page__header">
                <h3 class="info-page__heading _ta-e">–°–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â</h3>
                <div class="btns">
                    <a href="{% url 'sources:localstorage_create' knowledgebase.pk %}" class="btn btn--reset btn--simple" title="–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                        <svg class="btn__icon">
                            <use xlink:href="{% static 'img/icons/sprite.svg' %}#storage"></use>
                        </svg>
                        —Å–æ–∑–¥–∞—Ç—å
                    </a>
                </div>
            </div>
            <div class="info-page__body">
                <h3 class="info-page__heading"></h3>
                {% if knowledgebase.local_storages|length > 0 %}
                    <table class="elastic-table elastic-table_3-auto">
                        <thead class="elastic-table__thead">
                            <tr class="elastic-table__tr">
                                <th class="elastic-table__th">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="elastic-table__th">–ö–æ–ª-–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</th>
                                <th class="elastic-table__th"></th>
                            </tr>
                        </thead>
                        <tbody class="elastic-table__tbody">
                            {% for storage in knowledgebase.local_storages %}
                                <tr class="elastic-table__tr">
                                    <td class="elastic-table__td">
                                        <a href="{% url 'sources:localstorage_detail' storage.id %}" class="link-marker">
                                            <div class="elastic-table__cell">
                                                <span>{{ storage.name }}</span>
                                                <span>{{ storage.created_at|date:"d.m.Y H:i" }}</span>
                                                <span>{{ storage.author.get_full_name|default:storage.author }}</span>
                                            </div>
                                            <svg class="link-marker__marker">
                                                <use xlink:href="{% static 'img/icons/sprite.svg' %}#storage"></use>
                                            </svg>
                                        </a>
                                    </td>
                                    <td class="elastic-table__td">
                                        {{ storage.localdocuments_counter }}
                                    </td>
                                    <td class="elastic-table__td _ai-fe">
                                        <div class="btns">
                                            <a href="{% url 'sources:localstorage_update' storage.id %}" class="btn btn--reset btn--round" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#edit-gear"></use>
                                                </svg>
                                            </a>
                                            <a href="{% url 'sources:localstorage_delete' storage.id %}" class="btn btn--reset btn--round btn--danger"  title="–£–¥–∞–ª–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ" aria-label="–£–¥–∞–ª–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#trash-fat"></use>
                                                </svg>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="text text--muted _ta-c">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â</p>
                {% endif %}
            </div>
            <div class="info-page__footer">
            </div>
        </div>
        <div class="page__info info-page info-page--website _mb" id="website">
            <span class="info-page__banner info-page__banner--medium">–≤–µ–±—Å–∞–π—Ç—ã</span>
            <div class="info-page__header">
                <h3 class="info-page__heading _ta-e">–°–ø–∏—Å–æ–∫ –≤–µ–±-—Å–∞–π—Ç–æ–≤</h3>
                <div class="btns">
                    <a href="{% url 'sources:website_create' knowledgebase.pk %}" class="btn btn--reset btn--simple" title="–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-—Å–∞–π—Ç" aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-—Å–∞–π—Ç">
                        <svg class="btn__icon">
                            <use xlink:href="{% static 'img/icons/sprite.svg' %}#website"></use>
                        </svg>
                        —Å–æ–∑–¥–∞—Ç—å
                    </a>
                </div>
            </div>
            <div class="info-page__body">
                <h3 class="info-page__heading"></h3>
                {% if knowledgebase.websites|length > 0 %}
                    <table class="elastic-table elastic-table_3-auto">
                        <thead class="elastic-table__thead">
                            <tr class="elastic-table__tr">
                                <th class="elastic-table__th">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="elastic-table__th">–ö–æ–ª-–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</th>
                                <th class="elastic-table__th"></th>
                            </tr>
                        </thead>
                        <tbody class="elastic-table__tbody">
                            {% for site in knowledgebase.websites %}
                                <tr class="elastic-table__tr">
                                    <td class="elastic-table__td">
                                        <a href="{% url 'sources:website_detail' site.id %}" class="link-marker">
                                            <div class="elastic-table__cell">
                                                <span>{{ site.name }}</span>
                                                <span>{{ site.main_url }}</span>
                                                <span>{{ site.created_at|date:"d.m.Y H:i" }}</span>
                                                <span>{{ site.author.get_full_name|default:site.author }}</span>
                                            </div>
                                            <svg class="link-marker__marker">
                                                <use xlink:href="{% static 'img/icons/sprite.svg' %}#cloud"></use>
                                            </svg>
                                        </a>
                                    </td>
                                    <td class="elastic-table__td">
                                        {{ site.urls_counter }}
                                    </td>
                                    <td class="elastic-table__td _ai-fe">
                                        <div class="btns">
                                            <a href="{% url 'sources:website_update' site.id %}" class="btn btn--reset btn--round" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±-—Å–∞–π—Ç–µ" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±-—Å–∞–π—Ç–µ">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#edit-gear"></use>
                                                </svg>
                                            </a>
                                            <a href="{% url 'sources:website_delete' site.id %}" class="btn btn--reset btn--round btn--danger"  title="–£–¥–∞–ª–∏—Ç—å –≤–µ–±—Å–∞–π—Ç" aria-label="–£–¥–∞–ª–∏—Ç—å –≤–µ–±—Å–∞–π—Ç">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#trash-fat"></use>
                                                </svg>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="text text--muted _ta-c">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤–µ–±—Å–∞–π—Ç–æ–≤</p>
                {% endif %}
            </div>
            <div class="info-page__footer">
                
            </div>
        </div>
        <div class="page__info info-page info-page--urlbatch _mb" id="urlbatch">
            <span class="info-page__banner info-page__banner--medium">–≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>
            <div class="info-page__header">
                <h3 class="info-page__heading _ta-e">–°–ø–∏—Å–æ–∫ –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏–π</h3>
                <div class="btns">
                    <a href="{% url 'sources:urlbatch_create' knowledgebase.pk %}" class="btn btn--reset btn--simple" title="–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏—é" aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏—é">
                        <svg class="btn__icon">
                            <use xlink:href="{% static 'img/icons/sprite.svg' %}#batch"></use>
                        </svg>
                        —Å–æ–∑–¥–∞—Ç—å
                    </a>
                </div>
            </div>
            <div class="info-page__body">
                <h3 class="info-page__heading"></h3>
                {% if knowledgebase.urlbatches|length > 0 %}
                    <table class="elastic-table elastic-table_3-auto">
                        <thead class="elastic-table__thead">
                            <tr class="elastic-table__tr">
                                <th class="elastic-table__th">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="elastic-table__th">–ö–æ–ª-–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</th>
                                <th class="elastic-table__th"></th>
                            </tr>
                        </thead>
                        <tbody class="elastic-table__tbody">
                            {% for urlbatch in knowledgebase.urlbatches %}
                                <tr class="elastic-table__tr">
                                    <td class="elastic-table__td">
                                        <a href="{% url 'sources:urlbatch_detail' urlbatch.id %}" class="link-marker">
                                            <div class="elastic-table__cell">
                                                <span>{{ urlbatch.name }}</span>
                                                <span>{{ urlbatch.created_at|date:"d.m.Y H:i" }}</span>
                                                <span>{{ urlbatch.author.get_full_name|default:urlbatch.author }}</span>
                                            </div>
                                            <svg class="link-marker__marker">
                                                <use xlink:href="{% static 'img/icons/sprite.svg' %}#batch"></use>
                                            </svg>
                                        </a>
                                    </td>
                                    <td class="elastic-table__td">
                                        {{ urlbatch.urls_counter }}
                                    </td>
                                    <td class="elastic-table__td _ai-fe">
                                        <div class="btns">
                                            <a href="{% url 'sources:urlbatch_update' urlbatch.id %}" class="btn btn--reset btn--round" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏–∏" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏–∏">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#edit-gear"></use>
                                                </svg>
                                            </a>
                                            <a href="{% url 'sources:urlbatch_delete' urlbatch.id %}" class="btn btn--reset btn--round"  title="–£–¥–∞–ª–∏—Ç—å –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏—é" aria-label="–£–¥–∞–ª–∏—Ç—å –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏—é">
                                                <svg class="btn__icon">
                                                    <use xlink:href="{% static 'img/icons/sprite.svg' %}#trash-fat"></use>
                                                </svg>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="text text--muted _ta-c">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤–µ–±-–∫–æ–ª–ª–µ–∫—Ü–∏–π</p>
                {% endif %}
            </div>
            <div class="info-page__footer">
            </div>
        </div>
        {% include "include/object_history.html" %}
    </div>
</div>
{% endblock %}
